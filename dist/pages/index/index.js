"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var log_factory_1 = require("../../logs/log.factory");
var http_base_1 = require("../../https/http.base");
var api_const_1 = require("../../api/api.const");
var util_1 = require("../../utils/util");
var app = getApp();
var log = log_factory_1.LogFactory.get("Index");
var http = new http_base_1.HttpBase();
Page({
    data: {
        StatusBar: app.globalData.StatusBar,
        CustomBar: app.globalData.CustomBar,
        bannerList: [],
        hotList: [],
        recList: [],
        pi: 1,
        ps: 10
    },
    onLoad: function () {
        console.log(this.data.CustomBar);
        wx.showLoading({
            title: '加载中...'
        });
        Promise.all([
            this.getBanner(),
            this.getHotGoods(),
            this.getRecGoods()
        ]).then(function (res) {
            wx.hideLoading({ success: function () { } });
        });
    },
    getBanner: function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            http.get(api_const_1.Apis.banner.queryBanner, { data: { pi: _this.data.pi, ps: _this.data.ps, nbhd: "N00001" } }).then(function (res) {
                var data = res;
                log.log("banner-list: ", res);
                if (!util_1.isEmpty(data.result)) {
                    _this.setData({
                        bannerList: data.result
                    });
                }
                else {
                    log.log(util_1.getPageUrl() + 'banner无数据', res);
                }
                resolve(true);
            }).catch(function (res) {
                log.log(util_1.getPageUrl() + "banner接口", res);
                reject(true);
            });
        });
    },
    getHotGoods: function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            http.get(api_const_1.Apis.hot.queryOfNbhd, { data: { pi: _this.data.pi, ps: _this.data.ps, nbhd: "N00001" } }).then(function (res) {
                var data = res;
                log.log("hot-list: ", data);
                if (!util_1.isEmpty(data.result)) {
                    data.result.map(function (item) {
                        item.url = "pages/good/index?url=" + api_const_1.Apis.hot.restful.get + "&&id=" + item.id;
                    });
                    _this.setData({
                        hotList: data.result
                    });
                }
                else {
                    log.log(util_1.getPageUrl() + "hotgood无数据", data);
                }
                resolve(true);
            }).catch(function (res) {
                log.log(util_1.getPageUrl() + "hotgood接口", res);
                reject(true);
            });
        });
    },
    getRecGoods: function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            http.get(api_const_1.Apis.rec.queryOfMy, { data: { pi: _this.data.pi, ps: _this.data.ps, nid: "N00001", uid: "U100000003" } }).then(function (res) {
                var data = res;
                if (!util_1.isEmpty(data.result)) {
                    data.result.map(function (item) {
                        item.url = "/pages/good/index?url=" + api_const_1.Apis.rec.restful.get + "&&id=" + item.id;
                        var num = parseFloat(item.retailprice);
                        item.retailprice = num.toFixed(2);
                    });
                    _this.setData({
                        recList: data.result
                    });
                }
                else {
                    log.log(util_1.getPageUrl() + "recgood接口", res);
                }
                resolve(true);
            }).catch(function (res) {
                log.log(util_1.getPageUrl() + "recgood接口", res);
                reject(true);
            });
        });
    },
    addCartListenner: function (e) {
        log.log("addCartListenner: ", e);
    }
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,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VyxFQUFFLEdBQUcsQ0FBQyxDQUFBO2dCQUN4QyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDZCxDQUFDLENBQUMsQ0FBQTtRQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUosQ0FBQztJQUVELGdCQUFnQixZQUFDLENBQU07UUFDckIsR0FBRyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUNsQyxDQUFDO0NBQ0YsQ0FBQyxDQUFBIiwiZmlsZSI6InBhZ2VzL2luZGV4L2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9pbmRleC5qc1xuLy/ojrflj5blupTnlKjlrp7kvotcbmltcG9ydCB7IElNeUFwcCB9IGZyb20gJy4uLy4uL2FwcCdcbmltcG9ydCB7IExvZ0ZhY3RvcnkgfSBmcm9tICcuLi8uLi9sb2dzL2xvZy5mYWN0b3J5J1xuaW1wb3J0IHtIdHRwQmFzZX0gZnJvbSAnLi4vLi4vaHR0cHMvaHR0cC5iYXNlJ1xuaW1wb3J0IHtJQ29tbW9uUmVzcG9uc2V9IGZyb20gJy4uLy4uL2h0dHBzL2h0dHAuaW50ZXJmYWNlJ1xuaW1wb3J0IHtBcGlzfSBmcm9tICcuLi8uLi9hcGkvYXBpLmNvbnN0J1xuaW1wb3J0IHtpc0VtcHR5LCBnZXRQYWdlVXJsfSBmcm9tICcuLi8uLi91dGlscy91dGlsJ1xuY29uc3QgYXBwID0gZ2V0QXBwPElNeUFwcD4oKVxuY29uc3QgbG9nID0gTG9nRmFjdG9yeS5nZXQoXCJJbmRleFwiKTtcbmNvbnN0IGh0dHAgPSBuZXcgSHR0cEJhc2UoKVxuUGFnZSh7XG4gIGRhdGE6IHtcbiAgICBTdGF0dXNCYXI6IGFwcC5nbG9iYWxEYXRhLlN0YXR1c0JhcixcbiAgICBDdXN0b21CYXI6IGFwcC5nbG9iYWxEYXRhLkN1c3RvbUJhcixcbiAgICBiYW5uZXJMaXN0OiBbXSxcbiAgICBob3RMaXN0OiBbXSxcbiAgICByZWNMaXN0OiBbXSxcbiAgICBwaTogMSxcbiAgICBwczogMTBcbiAgfSwgIFxuICBvbkxvYWQoKSB7ICAgXG4gICAgY29uc29sZS5sb2codGhpcy5kYXRhLkN1c3RvbUJhcilcbiAgICB3eC5zaG93TG9hZGluZyh7XG4gICAgICB0aXRsZTogJ+WKoOi9veS4rS4uLidcbiAgICB9KVxuICAgIFByb21pc2UuYWxsKFtcbiAgICAgIHRoaXMuZ2V0QmFubmVyKCksXG4gICAgICB0aGlzLmdldEhvdEdvb2RzKCksXG4gICAgICB0aGlzLmdldFJlY0dvb2RzKClcbiAgICBdKS50aGVuKHJlcyA9PiB7XG4gICAgICB3eC5oaWRlTG9hZGluZyh7c3VjY2VzczogKCk6IHZvaWQgPT4ge319KVxuICAgIH0pXG4gICBcbiAgfSwgXG4gIC8vIGJhbm5lcuWIl+ihqFxuICBnZXRCYW5uZXIoKSB7XG4gICAgbGV0IF90aGlzID0gdGhpc1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBodHRwLmdldChBcGlzLmJhbm5lci5xdWVyeUJhbm5lcix7ZGF0YToge3BpOl90aGlzLmRhdGEucGksIHBzOiBfdGhpcy5kYXRhLnBzLCBuYmhkOlwiTjAwMDAxXCJ9fSkudGhlbihyZXMgPT4ge1xuICAgICAgICBjb25zdCBkYXRhOiBJQ29tbW9uUmVzcG9uc2UgPSByZXMgXG4gICAgICAgIGxvZy5sb2coXCJiYW5uZXItbGlzdDogXCIgLCByZXMpXG4gICAgICAgIGlmICghaXNFbXB0eShkYXRhLnJlc3VsdCkpIHsgICAgICAgIFxuICAgICAgICAgIF90aGlzLnNldERhdGEhKHtcbiAgICAgICAgICAgIGJhbm5lckxpc3Q6IGRhdGEucmVzdWx0XG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsb2cubG9nKGdldFBhZ2VVcmwoKSArICdiYW5uZXLml6DmlbDmja4nLCByZXMpXG4gICAgICAgIH1cbiAgICAgICByZXNvbHZlKHRydWUpXG4gICAgICB9KS5jYXRjaChyZXMgPT57IFxuICAgICAgICBsb2cubG9nKGdldFBhZ2VVcmwoKSArIFwiYmFubmVy5o6l5Y+jXCIsIHJlcylcbiAgICAgICAgcmVqZWN0KHRydWUpXG4gICAgICB9KVxuICAgIH0pICAgIFxuICB9LFxuICAvLyDng63ljZbllYblk4FcbiAgZ2V0SG90R29vZHMoKXtcbiAgICBsZXQgX3RoaXMgPSB0aGlzXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGh0dHAuZ2V0KEFwaXMuaG90LnF1ZXJ5T2ZOYmhkLCB7ZGF0YTp7cGk6X3RoaXMuZGF0YS5waSwgcHM6IF90aGlzLmRhdGEucHMsIG5iaGQ6XCJOMDAwMDFcIn19KS50aGVuKHJlcyA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGE6IElDb21tb25SZXNwb25zZSA9IHJlcyBcbiAgICAgICAgbG9nLmxvZyhcImhvdC1saXN0OiBcIiwgZGF0YSlcbiAgICAgICAgaWYoIWlzRW1wdHkoZGF0YS5yZXN1bHQpKSB7XG4gICAgICAgICAgZGF0YS5yZXN1bHQubWFwKChpdGVtOiBhbnkpPT4ge1xuICAgICAgICAgICAgaXRlbS51cmwgPSBgcGFnZXMvZ29vZC9pbmRleD91cmw9JHtBcGlzLmhvdC5yZXN0ZnVsLmdldH0mJmlkPSR7aXRlbS5pZH1gXG4gICAgICAgICAgfSlcbiAgICAgICAgICBfdGhpcy5zZXREYXRhISh7XG4gICAgICAgICAgICBob3RMaXN0OiBkYXRhLnJlc3VsdFxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbG9nLmxvZyhnZXRQYWdlVXJsKCkgKyBcImhvdGdvb2Tml6DmlbDmja5cIiwgZGF0YSlcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKHRydWUpXG4gICAgICB9KS5jYXRjaChyZXMgPT4ge1xuICAgICAgICBsb2cubG9nKGdldFBhZ2VVcmwoKSArIFwiaG90Z29vZOaOpeWPo1wiLCByZXMpXG4gICAgICAgIHJlamVjdCh0cnVlKVxuICAgICAgfSlcbiAgICB9KSAgIFxuICB9LFxuICAvLyDmjqjojZDllYblk4FcbiAgZ2V0UmVjR29vZHMoKSB7XG4gICAgbGV0IF90aGlzID0gdGhpc1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBodHRwLmdldChBcGlzLnJlYy5xdWVyeU9mTXksIHtkYXRhOiB7cGk6IF90aGlzLmRhdGEucGksIHBzOiBfdGhpcy5kYXRhLnBzLCBuaWQ6IFwiTjAwMDAxXCIsIHVpZDogXCJVMTAwMDAwMDAzXCJ9fSkudGhlbihyZXMgPT4ge1xuICAgICAgICBjb25zdCBkYXRhOiBJQ29tbW9uUmVzcG9uc2UgPSByZXNcbiAgICAgICAgaWYoIWlzRW1wdHkoZGF0YS5yZXN1bHQpKSB7XG4gICAgICAgICAgZGF0YS5yZXN1bHQubWFwKChpdGVtOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGl0ZW0udXJsID0gYC9wYWdlcy9nb29kL2luZGV4P3VybD0ke0FwaXMucmVjLnJlc3RmdWwuZ2V0fSYmaWQ9JHtpdGVtLmlkIH1gXG4gICAgICAgICAgICBsZXQgbnVtID0gcGFyc2VGbG9hdChpdGVtLnJldGFpbHByaWNlKVxuICAgICAgICAgICAgaXRlbS5yZXRhaWxwcmljZSA9IG51bS50b0ZpeGVkKDIpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBfdGhpcy5zZXREYXRhISh7XG4gICAgICAgICAgICByZWNMaXN0OiBkYXRhLnJlc3VsdFxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbG9nLmxvZyhnZXRQYWdlVXJsKCkgKyBcInJlY2dvb2TmjqXlj6NcIiwgcmVzKVxuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUodHJ1ZSlcbiAgICAgIH0pLmNhdGNoKHJlcyA9PiB7XG4gICAgICAgIGxvZy5sb2coZ2V0UGFnZVVybCgpICsgXCJyZWNnb29k5o6l5Y+jXCIsIHJlcylcbiAgICAgICAgcmVqZWN0KHRydWUpXG4gICAgICB9KVxuICAgIH0pXG4gICBcbiAgfSxcbiAgLy8g5ZWG5ZOB5re75Yqg6LSt54mp6L2mXG4gIGFkZENhcnRMaXN0ZW5uZXIoZTogYW55KSB7XG4gICAgbG9nLmxvZyhcImFkZENhcnRMaXN0ZW5uZXI6IFwiLCBlKVxuICB9XG59KVxuIl19
